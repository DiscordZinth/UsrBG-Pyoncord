(function(t,c,i,D,d,s,e,r,l){"use strict";i.findByProps("default","getUserBannerURL");let u;const y=async function(){try{return u=await(await d.safeFetch("https://discordzinth.github.io/usrbg/dist/usrbg.json",{cache:"no-store"})).json(),u}catch(a){c.logger.error("Failed to fetch userBG data",a)}},{ScrollView:R}=l.General,{FormSection:w,FormRow:n}=l.Forms;function b(){return e.React.createElement(R,null,e.React.createElement(w,null,e.React.createElement(n,{label:"Discord Server",leading:e.React.createElement(n.Icon,{source:r.getAssetIDByName("Discord")}),trailing:n.Arrow,onPress:function(){return e.url.openDeeplink("https://discord.gg/TeRQEPb")}}),e.React.createElement(n,{label:"Reload Database",leading:e.React.createElement(n.Icon,{source:r.getAssetIDByName("ic_message_retry")}),onPress:async function(){return await y()?s.showToast("Reloaded DB",r.getAssetIDByName("check")):s.showToast("Failed to reload DB",r.getAssetIDByName("small"))}})))}const v=i.findByProps("default","getUserBannerURL");let o,f;const g=async function(){try{return o=await(await d.safeFetch("https://discordzinth.github.io/usrbg/dist/usrbg.json",{cache:"no-store"})).json(),o}catch(a){c.logger.error("Failed to fetch userBG data",a)}},F=async function(){if(await g(),!o)return s.showToast("Failed to load DB");f=D.after("getUserBannerURL",v,function(a){let[h]=a;const B=o?.find(function(E){return E.uid===h?.id});if(h?.banner===void 0&&B)return B.img})},U=function(){return f?.()},m=b;return t.fetchData=g,t.onLoad=F,t.onUnload=U,t.settings=m,t})({},vendetta,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.assets,vendetta.ui.components);
